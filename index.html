<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Exercício Prático - WhatsApp Business</title>

  <link rel="stylesheet" href="css/style.css">

  <!-- EmailJS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
    (function() {
      // Inicialize com sua Public Key (user/public key)
      emailjs.init("urNi3uOypg6ka6D54"); // <- confirme se é essa mesmo
    })();

    function enviarFormulario(event) {
      event.preventDefault();
      const form = event.target;
      const btn = form.querySelector('button[type="submit"]');

      // desativa botão e mostra texto
      btn.disabled = true;
      const originalText = btn.innerText;
      btn.innerText = "Enviando...";

      // envia usando EmailJS (service ID e template ID)
      emailjs.sendForm('service_p5t58rw', 'template_m34e0dg', form)
        .then(function(response) {
          // sucesso: redireciona para obrigado
          // se preferir, mostrar modal ou mensagem estilizada em vez de redirecionar
          window.location.href = "https://whatsapp-business-tau.vercel.app/obrigado.html";
        }, function(error) {
          // erro: reabilita botão e mostra alerta amigável
          btn.disabled = false;
          btn.innerText = originalText;
          console.error("EmailJS error:", error);
          alert("Ocorreu um erro ao enviar. Verifique sua conexão e tente novamente. Se o problema persistir, veja o console do navegador.");
        });
    }
  </script>
</head>
<body>
  <div class="container">
    <header>
      <img src="imagem/logo ifs.png" alt="Logo" class="logo" style="max-width:120px;">
      <h1>Exercício Prático: Estratégia de Negócio com WhatsApp Business</h1>
      <p class="subtitle">
        Preencha os campos abaixo para montar sua estratégia digital. Ao final, clique em <strong>"Enviar Respostas"</strong>.
      </p>
    </header>

    <!-- OBS: remova action e method para evitar envio por FormSubmit -->
    <form onsubmit="enviarFormulario(event)">

      <!-- Parte 1 -->
      <div class="form-section">
        <h2>Parte 1: A Vitrine do Seu Negócio (Perfil Comercial)</h2>

        <!-- Alterei nomes para não começarem com número (recomendo isso) -->
        <label for="nome-comercial">1. Nome Comercial (claro e fácil de lembrar):</label>
        <input type="text" id="nome-comercial" name="nome_comercial" placeholder="Ex: Horta da Serra, Geleias da Lúcia" required>

        <label for="descricao-curta">2. Descrição Curta (quem é você, o que vende e seu diferencial):</label>
        <textarea id="descricao-curta" name="descricao_curta" rows="4" placeholder="Ex: Verduras orgânicas colhidas na hora, entregues toda sexta-feira..." required></textarea>

        <label for="categoria">3. Categoria do Negócio:</label>
        <input type="text" id="categoria" name="categoria" placeholder="Ex: Agricultura, Produtos Artesanais, Panificação" required>

        <label for="horario">4. Horário de Atendimento:</label>
        <input type="text" id="horario" name="horario" placeholder="Ex: Segunda a sexta, das 8h às 17h">
      </div>

      <!-- Parte 2 -->
      <div class="form-section">
        <h2>Parte 2: Comunicação com o Cliente (Mensagens e Atendimento)</h2>

        <label for="msg-saudacao">1. Mensagem de Saudação (primeiro contato do cliente):</label>
        <textarea id="msg-saudacao" name="mensagem_saudacao" rows="3" placeholder="Ex: Olá! Agradecemos seu contato. Como podemos ajudar?" required></textarea>

        <label for="msg-ausencia">2. Mensagem de Ausência (fora do horário de atendimento):</label>
        <textarea id="msg-ausencia" name="mensagem_ausencia" rows="3" placeholder="Ex: No momento estamos fora do horário, mas retornaremos assim que possível."></textarea>

        <label for="resp-rapida-1">3. Resposta Rápida 1 (Atalho: /pagamento)</label>
        <textarea id="resp-rapida-1" name="resposta_pagamento" rows="3" placeholder="Ex: Aceitamos PIX, transferência bancária e pagamento na entrega." required></textarea>

        <label for="resp-rapida-2">4. Resposta Rápida 2 (Atalho: /entrega)</label>
        <textarea id="resp-rapida-2" name="resposta_entrega" rows="3" placeholder="Ex: Fazemos entregas toda sexta-feira, das 8h às 12h." required></textarea>

        <label for="etiquetas">5. Etiquetas que você pretende usar:</label>
        <input type="text" id="etiquetas" name="etiquetas" placeholder="Ex: novo pedido, aguardando pagamento, entregue">
      </div>

      <!-- Parte 3 -->
      <div class="form-section">
        <h2>Parte 3: Catálogo e Apresentação dos Produtos</h2>

        <label for="produto-exemplo">Exemplo de produto (nome, preço, descrição):</label>
        <textarea id="produto-exemplo" name="exemplo_produto" rows="3" placeholder="Ex: Cesta Verde - R$ 25,00 (alface, couve, cheiro-verde, rúcula)"></textarea>

        <label for="link">Link para vendas / catálogo / redes sociais:</label>
        <input type="text" id="link" name="link_vendas" placeholder="Ex: https://instagram.com/hortadaserra">
      </div>

      <!-- Parte 4 -->
      <div class="form-section">
        <h2>Parte 4: Estratégia e Planejamento</h2>

        <label for="publico">Público-alvo do seu negócio:</label>
        <textarea id="publico" name="publico_alvo" rows="2" placeholder="Ex: moradores do bairro, feirantes, consumidores de produtos naturais."></textarea>

        <label for="metas">Metas semanais ou mensais (ex: número de pedidos):</label>
        <textarea id="metas" name="metas" rows="2" placeholder="Ex: vender 10 cestas por semana"></textarea>

        <label for="status">Ideias de conteúdo para postar nos Status:</label>
        <textarea id="status" name="ideias_status" rows="4" placeholder="Ex: Mostrar a colheita do dia, promoções da semana, receitas."></textarea>
      </div>

      <!-- Identificação -->
      <div class="form-section aluno-info">
        <h2>Identificação do Participante</h2>

        <label for="aluno-nome">Seu Nome Completo:</label>
        <input type="text" id="aluno-nome" name="nome_aluno" placeholder="Digite seu nome aqui" required>

        <label for="aluno-contato">Seu Contato (WhatsApp):</label>
        <input type="text" id="aluno-contato" name="contato_aluno" placeholder="(11) 11111-1111" required>
      </div>

      <button type="submit">Enviar Respostas</button>
    </form>
  </div>
</body>
</html>
